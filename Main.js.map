{
  "version": 3,
  "file": "Main.js",
  "sourceRoot": "",
  "sources": [
    "Main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "class Main\n    data = [0..10]\n    each:(callback)->\n        for d in data\n            callback(d)\nm = new Main()\nm.each (d)->\n    console.log d\nconsole.log 'fk'\niconv = require 'iconv-lite'\ncheerio = require 'cheerio'\npuppeteer = require 'puppeteer'\nfs = require 'fs'\nsqlite = require 'sqlite3'\ninitPuppeteerPool = require './puppeteer-pool.js'\npool = initPuppeteerPool {\n    puppeteerArgs:{\n        ignoreHTTPSErrors:true,\n        headless:true,\n        timeout:0,\n        pipe:true\n    }\n}\n\ntgt = 'table.w782.comm.lsjz'\ndb = new sqlite.Database '/home/wang/文档/database/data.db'\n\ninsert = (t, d, v)->\n    db.serialize ()->\n        stmt = db.prepare 'INSERT INTO info2 VALUES(?, ?, ?)'\n        stmt.run t, d, v, (err)->\n        stmt.finalize()\n\nrun = (html, tk)->\n    $ = await cheerio.load html\n    tbody = $(tgt).children()[1]\n    $(tbody).children().each (ind, ele)->\n        tds = $(ele).children()\n            # 日期\n        day = $(tds[0]).text()\n            # 单位净值\n        value = $(tds[1]).text()[0..5]\n            # 日增长率\n        insert(tk, day, value)\n\n\ndb.serialize ()->\n    iter_times = 0\n    LIMIT = 5\n    db.get \"SELECT COUNT(*) AS num FROM fund\", (err, res)->\n        console.log res\n        LIMIT = res.num\n\n    db.each \"SELECT ticket FROM fund\", (err, row)->\n        tk = row.ticket\n        await pool.use (instance)->\n            page = await instance.newPage()\n            url = \"http://fundf10.eastmoney.com/jjjz_#{tk}.html\"\n            await page.goto url\n            html = await page.content()\n            await page.close()\n            await run(html, tk)\n            iter_times += 1\n            if iter_times is LIMIT\n                console.log 'ok'\n                pool.drain().then(() => pool.clear())\n                console.log 'done'\n"
  ]
}