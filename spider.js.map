{
  "version": 3,
  "file": "spider.js",
  "sourceRoot": "",
  "sources": [
    "spider.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;AAAA,MAAA,OAAA,EAAA,KAAA,EAAA,EAAA,EAAA,EAAA,EAAA,QAAA,EAAA,cAAA,EAAA,IAAA,EAAA,KAAA,EAAA,MAAA,EAAA,YAAA,EAAA,OAAA,EAAA,KAAA,EAAA,GAAA,EAAA,OAAA,EAAA;;EAAA,OAAA,GAAU,OAAA,CAAQ,SAAR;;EACV,OAAA,GAAU,OAAA,CAAQ,SAAR;;EACV,EAAA,GAAK,OAAA,CAAQ,IAAR;;EACL,KAAA,GAAQ,OAAA,CAAQ,YAAR;;EACR,IAAA,GAAO,OAAA,CAAQ,MAAR;;EACP,OAAO,CAAC,GAAR,CAAY,MAAZ;;EACA,MAAA,GAAS,OAAA,CAAQ,SAAR;;EACT,KAAA,GAAQ,OAAA,CAAQ,OAAR;;EAGR,OAAA,GAAU;IACN,GAAA,EAAK,0CADC;IAEN,MAAA,EAAQ;EAFF;;EAKV,QAAA,GAAW;;EACX,cAAA,GAAiB;;EACjB,KAAA,GAAQ;;EACR,GAAA,GAAM;;EACN,EAAA,GAAK,IAAI,MAAM,CAAC,QAAX,CAAoB,gCAApB;;EACL,MAAA,GAAS,QAAA,CAAC,MAAD,EAAS,IAAT,CAAA;WACL,EAAE,CAAC,SAAH,CAAa,QAAA,CAAA,CAAA;AACT,UAAA;MAAA,IAAA,GAAO,EAAE,CAAC,OAAH,CAAW,+BAAX;MACP,IAAI,CAAC,GAAL,CAAS,MAAT,EAAiB,IAAjB;aACA,IAAI,CAAC,QAAL,CAAA;IAHS,CAAb;EADK;;EAOT,YAAA,GAAe,QAAA,CAAC,MAAD,EAAS,IAAT,CAAA;AACX,QAAA;IAAA,MAAA,GAAS,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,WAA3B;IACT,MAAM,CAAC,GAAP,CAAW,MAAX,EAAmB,IAAnB;WACA,MAAM,CAAC,IAAP,CAAA;EAHW;;EAMf,IAAI,CAAC,GAAL,CAAS,0CAAT,EAAqD,QAAA,CAAC,GAAD,CAAA;IACjD,GAAG,CAAC,EAAJ,CAAO,MAAP,EAAe,QAAA,CAAC,IAAD,CAAA;MACX,QAAQ,CAAC,IAAT,CAAc,IAAd;MACA,cAAA,IAAkB,IAAI,CAAC;aACvB,KAAA;IAHW,CAAf;WAIA,GAAG,CAAC,EAAJ,CAAO,KAAP,EAAc,QAAA,CAAA,CAAA;AACV,UAAA,CAAA,EAAA,cAAA,EAAA;MAAA,cAAA,GAAiB,MAAM,CAAC,MAAP,CAAc,QAAd,EAAwB,cAAxB;MACjB,cAAA,GAAiB,KAAK,CAAC,MAAN,CAAa,cAAb,EAA6B,QAA7B;MACjB,CAAA,GAAI,OAAO,CAAC,IAAR,CAAa,cAAb;aACJ,CAAA,CAAE,cAAF,CAAiB,CAAC,IAAlB,CAAuB,QAAA,CAAC,KAAD,EAAQ,OAAR,CAAA;eACnB,CAAA,CAAE,OAAF,CAAU,CAAC,QAAX,CAAA,CAAqB,CAAC,IAAtB,CAA2B,QAAA,CAAC,GAAD,EAAM,GAAN,CAAA;iBACvB,CAAA,CAAE,GAAF,CAAM,CAAC,QAAP,CAAA,CAAiB,CAAC,IAAlB,CAAuB,QAAA,CAAC,CAAD,EAAI,CAAJ,CAAA;mBACnB,CAAA,CAAE,CAAF,CAAI,CAAC,QAAL,CAAA,CAAe,CAAC,IAAhB,CAAqB,QAAA,CAAC,GAAD,EAAM,GAAN,CAAA;AACjB,kBAAA,IAAA,EAAA,SAAA,EAAA;cAAA,IAAA,GAAO,GAAG,CAAC,QAAS,CAAA,CAAA,CAAE,CAAC;cACvB,IAAG,CAAI,IAAI,CAAC,KAAL,CAAW,KAAX,CAAP;gBACI,IAAG,CAAI,IAAI,CAAC,KAAL,CAAW,IAAX,CAAP;kBACI,SAAA,GAAY,IAAI,CAAC,MAAL,CAAY,CAAZ;kBACZ,WAAA,GAAc,GAAG,CAAC,IAAJ,CAAS,IAAT,CAAe,CAAA,CAAA,CAAE,CAAC,MAAlB,CAAyB,CAAzB;yBACd,MAAA,CAAO,WAAP,EAAoB,SAApB,EAHJ;iBADJ;;YAFiB,CAArB;UADmB,CAAvB;QADuB,CAA3B;MADmB,CAAvB;IAJU,CAAd;EALiD,CAArD;AAjCA",
  "sourcesContent": [
    "request = require 'request'\ncheerio = require 'cheerio'\nfs = require 'fs'\niconv = require 'iconv-lite'\nhttp = require 'http'\nconsole.log('dbg0')\nsqlite = require 'sqlite3'\nredis = require 'redis'\n\n\noptions = {\n    url: 'http://fund.eastmoney.com/allfund.html#0',\n    method: 'GET'\n};\n\nhtmlData = []\nhtmlDataLength = 0\ncount = 0\nreg = /.\\d+/\ndb = new sqlite.Database '/home/wang/文档/database/data.db'\ninsert = (ticket, name)->\n    db.serialize ()->\n        stmt = db.prepare 'INSERT INTO fund VALUES(?, ?)'\n        stmt.run ticket, name\n        stmt.finalize()\n\n\ninsert_redis = (ticket, name)->\n    client = redis.createClient('6379', '127.0.0.1')\n    client.set ticket, name\n    client.quit()\n\n\nhttp.get 'http://fund.eastmoney.com/allfund.html#0', (res)->\n    res.on 'data', (data)->\n        htmlData.push data\n        htmlDataLength += data.length\n        count++\n    res.on 'end', ()->\n        bufferHtmlData = Buffer.concat(htmlData, htmlDataLength)\n        decodeHtmlData = iconv.decode bufferHtmlData, 'gb2312'\n        $ = cheerio.load decodeHtmlData\n        $('ul.num_right').each (index, element)->\n            $(element).children().each (ind, ele)->\n                $(ele).children().each (i, e)->\n                    $(e).children().each (i_t, e_t)->\n                        data = e_t.children[0].data\n                        if not data.match '基金吧'\n                            if not data.match '档案'\n                                data_name = data.substr 8\n                                data_ticket = reg.exec(data)[0].substr 1\n                                insert data_ticket, data_name"
  ]
}